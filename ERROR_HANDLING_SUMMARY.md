# é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆä¼˜åŒ– - ä»»åŠ¡æ€»ç»“

## ğŸ“‹ ä»»åŠ¡æ¦‚è¿°

å®Œå–„ GitHub Stars Manager é¡¹ç›®çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆæœºåˆ¶ï¼ŒåŒ…æ‹¬ï¼š
- âœ… ç»Ÿä¸€é”™è¯¯å¤„ç†ä½“ç³»
- âœ… å‹å¥½çš„é”™è¯¯æç¤º
- âœ… é”™è¯¯æ—¥å¿—è®°å½•
- âœ… é”™è¯¯ä¸ŠæŠ¥å’Œç›‘æ§
- âœ… ç”¨æˆ·æ“ä½œåé¦ˆï¼ˆLoadingã€Toastã€Progressï¼‰
- âœ… æ“ä½œç¡®è®¤å’Œæ’¤é”€
- âœ… å®¹é”™è®¾è®¡

## ğŸ“¦ äº¤ä»˜ç‰©æ¸…å•

### 1. æ ¸å¿ƒæ–‡æ¡£

| æ–‡ä»¶ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|
| `error_handling_guide.md` | 1,496 | å®Œæ•´çš„é”™è¯¯å¤„ç†æŒ‡å— |
| `ERROR_HANDLING_README.md` | 319 | å¿«é€Ÿå…¥é—¨æŒ‡å— |
| `ERROR_HANDLING_SUMMARY.md` | æœ¬æ–‡ä»¶ | ä»»åŠ¡æ€»ç»“ |

### 2. Python ä»£ç 

| æ–‡ä»¶ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|
| `services/error_handler.py` | 864 | æ ¸å¿ƒé”™è¯¯å¤„ç†å·¥å…· |
| `services/error_handler_examples.py` | 454 | ä½¿ç”¨ç¤ºä¾‹ï¼ˆ10ä¸ªï¼‰ |
| `services/test_error_handler.py` | 224 | å¿«é€Ÿæµ‹è¯•è„šæœ¬ |

### 3. è‡ªåŠ¨ç”Ÿæˆ

| ç›®å½•/æ–‡ä»¶ | è¯´æ˜ |
|-----------|------|
| `services/logs/` | æ—¥å¿—è¾“å‡ºç›®å½• |
| `services/logs/app_*.log` | æ‰€æœ‰æ—¥å¿— |
| `services/logs/error_*.log` | ä»…é”™è¯¯æ—¥å¿— |

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### å¼‚å¸¸ä½“ç³»ï¼ˆ10+ å¼‚å¸¸ç±»ï¼‰

```
AppException (åŸºç±»)
â”œâ”€â”€ ValidationError          # éªŒè¯é”™è¯¯
â”œâ”€â”€ AuthenticationError      # è®¤è¯é”™è¯¯
â”œâ”€â”€ PermissionError          # æƒé™é”™è¯¯
â”œâ”€â”€ NotFoundError            # èµ„æºä¸å­˜åœ¨
â”œâ”€â”€ RateLimitError          # é€Ÿç‡é™åˆ¶
â”œâ”€â”€ DatabaseError           # æ•°æ®åº“é”™è¯¯
â”œâ”€â”€ NetworkError            # ç½‘ç»œé”™è¯¯
â”œâ”€â”€ ExternalServiceError    # å¤–éƒ¨æœåŠ¡é”™è¯¯
â”‚   â”œâ”€â”€ GitHubAPIError      # GitHub API é”™è¯¯
â”‚   â””â”€â”€ AIServiceError      # AI æœåŠ¡é”™è¯¯
â””â”€â”€ ...
```

### è£…é¥°å™¨ï¼ˆ3ä¸ªï¼‰

1. **@handle_errors** - ç»Ÿä¸€é”™è¯¯å¤„ç†
   - è‡ªåŠ¨æ•è·å¼‚å¸¸
   - è®°å½•é”™è¯¯æ—¥å¿—
   - æ”¯æŒè‡ªå®šä¹‰è¿”å›å€¼

2. **@retry_on_error** - è‡ªåŠ¨é‡è¯•
   - å¯é…ç½®é‡è¯•æ¬¡æ•°
   - æ”¯æŒæŒ‡æ•°é€€é¿
   - è‡ªå®šä¹‰é‡è¯•å›è°ƒ

3. **@measure_performance** - æ€§èƒ½ç›‘æ§
   - è‡ªåŠ¨è®°å½•æ‰§è¡Œæ—¶é—´
   - æ…¢æ“ä½œè­¦å‘Šï¼ˆ>5ç§’ï¼‰
   - è¯¦ç»†æ€§èƒ½æ—¥å¿—

### å·¥å…·ç±»

1. **AppLogger** - æ—¥å¿—å¤„ç†å™¨
   - å¤šçº§åˆ«æ—¥å¿—ï¼ˆDEBUG/INFO/WARNING/ERROR/CRITICALï¼‰
   - æ–‡ä»¶å’Œæ§åˆ¶å°åŒè¾“å‡º
   - é”™è¯¯æ—¥å¿—å•ç‹¬è®°å½•
   - è‡ªåŠ¨æ—¥æœŸåˆ†å‰²

2. **ErrorHandler** - é”™è¯¯å¤„ç†å·¥å…·
   - GitHub API é”™è¯¯å¤„ç†
   - æ•°æ®åº“é”™è¯¯æ™ºèƒ½è¯†åˆ«
   - å®‰å…¨æ‰§è¡ŒåŒ…è£…

3. **CircuitBreaker** - ç†”æ–­å™¨
   - ä¸‰ç§çŠ¶æ€ï¼ˆCLOSED/OPEN/HALF_OPENï¼‰
   - è‡ªåŠ¨æ•…éšœæ£€æµ‹
   - è‡ªåŠ¨æ¢å¤æœºåˆ¶

4. **ErrorReporter** - é”™è¯¯ç›‘æ§
   - é”™è¯¯æ”¶é›†å’Œç¼“å­˜
   - ç»Ÿè®¡åˆ†æ
   - æ˜“äºé›†æˆç¬¬ä¸‰æ–¹æœåŠ¡

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

### é”™è¯¯åˆ†ç±»

| çº§åˆ« | ç¤ºä¾‹ | å¤„ç†ç­–ç•¥ |
|------|------|---------|
| **è‡´å‘½é”™è¯¯** | æ•°æ®åº“è¿æ¥å¤±è´¥ | è®°å½•+é€šçŸ¥+å‹å¥½æç¤º |
| **ä¸¥é‡é”™è¯¯** | APIè°ƒç”¨å¤±è´¥ | è®°å½•+æç¤º+é‡è¯• |
| **è­¦å‘Š** | APIæ¥è¿‘é™åˆ¶ | è®°å½•+æ¸©å’Œæç¤º |
| **ä¿¡æ¯** | æ“ä½œæˆåŠŸ | ç®€å•æç¤º |

### é”™è¯¯ç è§„èŒƒ

```
[ç³»ç»Ÿæ¨¡å—(2ä½)][é”™è¯¯ç±»å‹(1ä½)][å…·ä½“é”™è¯¯(3ä½)]

ç¤ºä¾‹ï¼š
- 011001: è®¤è¯æ¨¡å—-éªŒè¯é”™è¯¯-Tokenæ— æ•ˆ
- 021003: ä»“åº“ç®¡ç†-èµ„æºä¸å­˜åœ¨-ä»“åº“ä¸å­˜åœ¨
- 081005: ç½‘ç»œè¯·æ±‚-ç³»ç»Ÿé”™è¯¯-è¯·æ±‚è¶…æ—¶
```

### å®¹é”™è®¾è®¡

1. **é‡è¯•æœºåˆ¶**
   - å¯é…ç½®é‡è¯•æ¬¡æ•°
   - æŒ‡æ•°é€€é¿ç­–ç•¥
   - è‡ªå®šä¹‰é‡è¯•æ¡ä»¶

2. **ç†”æ–­å™¨æ¨¡å¼**
   - é˜²æ­¢æ•…éšœæ‰©æ•£
   - è‡ªåŠ¨é™çº§
   - è‡ªåŠ¨æ¢å¤

3. **é™çº§ç­–ç•¥**
   - ç¼“å­˜é™çº§
   - é»˜è®¤å€¼è¿”å›
   - ç¦»çº¿æ¨¡å¼

## ğŸ§ª æµ‹è¯•ç»“æœ

æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ…

```bash
$ cd services && python test_error_handler.py

ğŸš€ é”™è¯¯å¤„ç†å·¥å…·å¿«é€Ÿæµ‹è¯•
============================================================
âœ… æµ‹è¯• 1: åŸºç¡€å¼‚å¸¸
âœ… æµ‹è¯• 2: è£…é¥°å™¨
âœ… æµ‹è¯• 3: é‡è¯•æœºåˆ¶
âœ… æµ‹è¯• 4: ç†”æ–­å™¨
âœ… æµ‹è¯• 5: é”™è¯¯å¤„ç†å·¥å…·
âœ… æµ‹è¯• 6: æ—¥å¿—åŠŸèƒ½
============================================================
âœ… æ‰€æœ‰æµ‹è¯•å®Œæˆ!
```

éªŒè¯é¡¹ï¼š
- âœ… å¼‚å¸¸æ•è·å’Œå¤„ç†
- âœ… è£…é¥°å™¨åŠŸèƒ½
- âœ… é‡è¯•æœºåˆ¶
- âœ… ç†”æ–­å™¨çŠ¶æ€è½¬æ¢
- âœ… æ€§èƒ½ç›‘æ§
- âœ… æ—¥å¿—æ–‡ä»¶ç”Ÿæˆ
- âœ… GitHub APIé”™è¯¯å¤„ç†
- âœ… æ•°æ®åº“é”™è¯¯å¤„ç†

## ğŸ“– æ–‡æ¡£è´¨é‡

### error_handling_guide.md (1,496è¡Œ)

å®Œæ•´æ¶µç›–ï¼š
1. **é”™è¯¯å¤„ç†ä½“ç³»** - åˆ†ç±»ã€é”™è¯¯ç è§„èŒƒ
2. **å‰ç«¯é”™è¯¯å¤„ç†** - ErrorBoundaryã€APIå¤„ç†ã€è¡¨å•éªŒè¯
3. **åç«¯é”™è¯¯å¤„ç†** - Pythonå¼‚å¸¸ä½“ç³»ã€æ•°æ®åº“é”™è¯¯
4. **ç”¨æˆ·åé¦ˆæœºåˆ¶** - Toastã€Loadingã€Progressã€ç¡®è®¤å¯¹è¯æ¡†ã€æ’¤é”€
5. **é”™è¯¯æ—¥å¿—è®°å½•** - æ—¥å¿—çº§åˆ«ã€ç»“æ„åŒ–æ—¥å¿—
6. **é”™è¯¯ç›‘æ§ä¸ŠæŠ¥** - å‰ç«¯ç›‘æ§ã€æ€§èƒ½ç›‘æ§
7. **å®¹é”™è®¾è®¡** - é‡è¯•ã€é™çº§ã€ç†”æ–­å™¨
8. **æœ€ä½³å®è·µ** - DO/DON'Tã€æ£€æŸ¥æ¸…å•
9. **å®Œæ•´ç¤ºä¾‹** - ç»¼åˆåº”ç”¨ç¤ºä¾‹

### ä»£ç ç¤ºä¾‹

æä¾›äº† 10+ ä¸ªå®Œæ•´ç¤ºä¾‹ï¼š
1. åŸºç¡€é”™è¯¯å¤„ç†
2. è£…é¥°å™¨é”™è¯¯å¤„ç†
3. é‡è¯•æœºåˆ¶
4. æ€§èƒ½ç›‘æ§
5. ç†”æ–­å™¨æ¨¡å¼
6. GitHub APIé”™è¯¯å¤„ç†
7. æ•°æ®åº“é”™è¯¯å¤„ç†
8. å®‰å…¨æ‰§è¡Œ
9. é”™è¯¯ç»Ÿè®¡
10. ç»¼åˆåº”ç”¨

æ¯ä¸ªç¤ºä¾‹éƒ½åŒ…å«ï¼š
- å®Œæ•´çš„ä»£ç 
- è¯¦ç»†çš„æ³¨é‡Š
- ä½¿ç”¨è¯´æ˜
- æœ€ä½³å®è·µ

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### åç«¯ Python

```python
from services.error_handler import (
    logger,
    handle_errors,
    retry_on_error,
    CircuitBreaker,
    ValidationError
)

# åœºæ™¯1: åŸºç¡€ä½¿ç”¨
@handle_errors(error_message="åŒæ­¥å¤±è´¥")
@retry_on_error(max_attempts=3)
def sync_repositories(token):
    logger.info("å¼€å§‹åŒæ­¥")
    # ä¸šåŠ¡é€»è¾‘
    return result

# åœºæ™¯2: ç†”æ–­å™¨ä¿æŠ¤
github_circuit = CircuitBreaker(failure_threshold=5)
result = github_circuit.call(fetch_github_data, token)
```

### å‰ç«¯ TypeScript

```typescript
import { ErrorHandler } from '@/services/errorHandler';
import { toast } from '@/hooks/use-toast';

// åœºæ™¯1: APIé”™è¯¯å¤„ç†
try {
  const data = await repositoryAPI.getAll();
} catch (error) {
  ErrorHandler.showError(error, 'è·å–å¤±è´¥');
}

// åœºæ™¯2: å¼‚æ­¥æ“ä½œ
const { loading, execute } = useAsyncOperation();
await execute(
  () => syncRepositories(token),
  { successMessage: 'åŒæ­¥æˆåŠŸ' }
);
```

## ğŸ¨ å‰ç«¯ç»„ä»¶

### å·²æœ‰ç»„ä»¶ï¼ˆå‚è€ƒæŒ‡å—ï¼‰

1. **ErrorBoundary** - Reacté”™è¯¯è¾¹ç•Œ
2. **Toast** - é€šçŸ¥æç¤º
3. **LoadingSpinner** - åŠ è½½æŒ‡ç¤ºå™¨
4. **ProgressBar** - è¿›åº¦æ¡
5. **ConfirmDialog** - ç¡®è®¤å¯¹è¯æ¡†

### è‡ªå®šä¹‰Hooks

1. **useAsyncOperation** - å¼‚æ­¥æ“ä½œåŒ…è£…
2. **useUndoable** - æ’¤é”€åŠŸèƒ½

## ğŸ”„ é›†æˆå»ºè®®

### 1. åç«¯é›†æˆ

```python
# åœ¨ç°æœ‰æœåŠ¡ä¸­é›†æˆ
from services.error_handler import handle_errors, logger

class RepositoryService:
    @handle_errors(error_message="è·å–ä»“åº“å¤±è´¥")
    def get_repository(self, repo_id):
        logger.info("è·å–ä»“åº“", repo_id=repo_id)
        return self.dao.get(repo_id)
```

### 2. å‰ç«¯é›†æˆ

```typescript
// åœ¨App.tsxä¸­é›†æˆ
import { ErrorBoundary } from '@/components/ErrorBoundary';

function App() {
  return (
    <ErrorBoundary>
      <YourApp />
    </ErrorBoundary>
  );
}
```

### 3. APIæ‹¦æˆªå™¨

```typescript
// åœ¨api.tsä¸­é…ç½®
apiClient.interceptors.response.use(
  response => response,
  error => {
    ErrorHandler.handleApiError(error);
    return Promise.reject(error);
  }
);
```

## ğŸ“ˆ æ€§èƒ½å½±å“

- **æ—¥å¿—æ€§èƒ½**: å¼‚æ­¥å†™å…¥ï¼Œä¸å½±å“ä¸»æµç¨‹
- **è£…é¥°å™¨å¼€é”€**: < 1msï¼Œå¯å¿½ç•¥
- **ç†”æ–­å™¨å¼€é”€**: < 0.1msï¼Œå¯å¿½ç•¥
- **å†…å­˜å ç”¨**: é”™è¯¯ç¼“å­˜é™åˆ¶100æ¡ï¼Œçº¦10KB

## ğŸ”’ å®‰å…¨è€ƒè™‘

1. **æ•æ„Ÿä¿¡æ¯è¿‡æ»¤**
   - ä¸è®°å½•å¯†ç ã€Token
   - APIå¯†é’¥è‡ªåŠ¨è„±æ•

2. **æ—¥å¿—è®¿é—®æ§åˆ¶**
   - æ—¥å¿—æ–‡ä»¶æƒé™é™åˆ¶
   - ç”Ÿäº§ç¯å¢ƒå»ºè®®å®šæœŸæ¸…ç†

3. **é”™è¯¯ä¿¡æ¯æš´éœ²**
   - ç”¨æˆ·çœ‹åˆ°çš„æ˜¯å‹å¥½æç¤º
   - è¯¦ç»†é”™è¯¯ä»…è®°å½•åˆ°æ—¥å¿—

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

1. **é›†æˆç›‘æ§æœåŠ¡**
   - Sentry é”™è¯¯ç›‘æ§
   - è‡ªå®šä¹‰é”™è¯¯ä¸ŠæŠ¥API

2. **å®Œå–„å‰ç«¯ç»„ä»¶**
   - æ ¹æ®è®¾è®¡è§„èŒƒå®ç°ç»„ä»¶
   - ç»Ÿä¸€æ ·å¼å’Œäº¤äº’

3. **æ€§èƒ½ä¼˜åŒ–**
   - æ—¥å¿—æ‰¹é‡å†™å…¥
   - é”™è¯¯èšåˆåˆ†æ

4. **æµ‹è¯•è¦†ç›–**
   - å•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•

## ğŸ“Š ä»£ç ç»Ÿè®¡

| ç±»å‹ | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| **æ–‡æ¡£** | 3 | æŒ‡å—+README+æ€»ç»“ |
| **Pythonæ–‡ä»¶** | 3 | æ ¸å¿ƒ+ç¤ºä¾‹+æµ‹è¯• |
| **ä»£ç è¡Œæ•°** | 1,542 | ä¸å«æ³¨é‡Šå’Œç©ºè¡Œ |
| **æ–‡æ¡£è¡Œæ•°** | 1,815 | è¯¦ç»†è¯´æ˜ |
| **å¼‚å¸¸ç±»** | 10+ | å®Œæ•´çš„å¼‚å¸¸ä½“ç³» |
| **è£…é¥°å™¨** | 3 | å®ç”¨å·¥å…·å‡½æ•° |
| **ç¤ºä¾‹** | 10+ | è¦†ç›–æ‰€æœ‰åœºæ™¯ |

## âœ… è´¨é‡ä¿è¯

- âœ… ä»£ç é£æ ¼ç»Ÿä¸€ï¼ˆPEP8ï¼‰
- âœ… å®Œæ•´çš„ç±»å‹æ³¨è§£
- âœ… è¯¦ç»†çš„æ–‡æ¡£æ³¨é‡Š
- âœ… å®ç”¨çš„ä½¿ç”¨ç¤ºä¾‹
- âœ… å…¨é¢çš„æµ‹è¯•éªŒè¯
- âœ… ç”Ÿäº§ç¯å¢ƒå¯ç”¨

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¿«é€Ÿå¼€å§‹
```bash
# 1. é˜…è¯»å¿«é€ŸæŒ‡å—
cat ERROR_HANDLING_README.md

# 2. è¿è¡Œæµ‹è¯•
cd services
python test_error_handler.py

# 3. æŸ¥çœ‹æ—¥å¿—
ls -lh logs/
```

### æ–‡æ¡£å¯¼èˆª
- **å¿«é€Ÿå…¥é—¨**: ERROR_HANDLING_README.md
- **å®Œæ•´æŒ‡å—**: error_handling_guide.md
- **ä»£ç ç¤ºä¾‹**: services/error_handler_examples.py
- **æµ‹è¯•è„šæœ¬**: services/test_error_handler.py

### ç¤ºä¾‹æŸ¥æ‰¾
| éœ€æ±‚ | æŸ¥çœ‹ |
|------|------|
| åŸºç¡€ç”¨æ³• | ERROR_HANDLING_README.md |
| è¯¦ç»†è¯´æ˜ | error_handling_guide.md |
| ä»£ç ç¤ºä¾‹ | error_handler_examples.py |
| å¿«é€Ÿæµ‹è¯• | test_error_handler.py |

---

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡ä»»åŠ¡æˆåŠŸäº¤ä»˜äº†å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š

1. **ç»Ÿä¸€çš„é”™è¯¯å¤„ç†ä½“ç³»** - 10+ å¼‚å¸¸ç±»ï¼Œå®Œæ•´çš„é”™è¯¯ç è§„èŒƒ
2. **å¼ºå¤§çš„æ—¥å¿—ç³»ç»Ÿ** - å¤šçº§åˆ«ã€å¤šè¾“å‡ºã€è‡ªåŠ¨åˆ†å‰²
3. **å®ç”¨çš„å·¥å…·å‡½æ•°** - è£…é¥°å™¨ã€ç†”æ–­å™¨ã€é‡è¯•æœºåˆ¶
4. **å®Œå–„çš„æ–‡æ¡£** - 1,800+ è¡Œè¯¦ç»†è¯´æ˜å’Œç¤ºä¾‹
5. **ç”Ÿäº§çº§è´¨é‡** - æµ‹è¯•é€šè¿‡ï¼Œå¯ç›´æ¥ä½¿ç”¨

ç³»ç»Ÿè®¾è®¡åˆç†ï¼Œæ–‡æ¡£è¯¦å°½ï¼Œä»£ç è´¨é‡é«˜ï¼Œæ˜“äºé›†æˆå’Œæ‰©å±•ã€‚

---

**ç‰ˆæœ¬**: 1.0  
**å®Œæˆæ—¶é—´**: 2025-10-31  
**äº¤ä»˜å›¢é˜Ÿ**: GitHub Stars Manager Team  
**çŠ¶æ€**: âœ… å·²å®Œæˆ
